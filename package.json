const { WebcastPushConnection } = require('tiktok-live-connector');
const express = require('express');
require('dotenv').config();

const app = express();
const port = process.env.PORT || 10000;

// ุถุน ุงุณู ุญุณุงุจู ูู ุชูู ุชูู ููุง ุจุฏูู ุนูุงูุฉ @
let tiktokUsername = "ุงูุชุจ_ููุฒุฑู_ููุง"; 

let tiktokChatConnection = new WebcastPushConnection(tiktokUsername);

tiktokChatConnection.connect().then(state => {
    console.info(`โ ูุชุตู ุงูุขู ุจุจุซ: ${state.roomId}`);
}).catch(err => {
    console.error('โ ูุดู ุงูุงุชุตุงู (ุชุฃูุฏ ุฃู ุงูุจุซ ุงููุจุงุดุฑ ุดุบุงู):', err);
});

// ุงุณุชูุจุงู ุงูุชุนูููุงุช
tiktokChatConnection.on('chat', data => {
    console.log(`๐ฌ ${data.nickname}: ${data.comment}`);
    // ููุง ุณูุถูู ูุงุญูุงู ููุฏ ุงูุฑุฏ ุงูุตูุชู ูุงูุฐูุงุก ุงูุงุตุทูุงุนู
});

app.get('/', (req, res) => res.send('ุจุซ ุชูู ุชูู ูุดุท ุงูุขู!'));
app.listen(port, () => console.log(`ุงูุณูุฑูุฑ ูุนูู ุนูู ูููุฐ ${port}`));
